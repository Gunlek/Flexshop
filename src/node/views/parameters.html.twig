{% extends 'libs/template.html.twig' %}

{% block links %}
    <a href="/workshops"><li>Ateliers</li></a>
    <a href="/categories"><li>Catégories</li></a>
    <a href="/machines"><li>Machines</li></a>
    <a href="/sections"><li>Sections</li></a>
    <a href="/parameters"><li class="active">Paramètres</li></a>
{% endblock %}

{% block content %}
<div id="workshops">
    <h1>Gestion des paramètres</h1>
    <h3 style="padding-left: 30px;">Ajout d'un paramètre</h3>
    <div class="row">
        <div class="col-3">
            <select v-model="new_parameter_section" class="form-control container-fluid">
                <option disabled value="">Choisissez une section</option>
                <option v-for="section in section_list" v-bind:value="section.section_id">${ getSectionMachine(section.section_id) }, ${ section.section_type }</option>
            </select>
        </div>
        <div class="col-3">
            <input type="text" class="container-fluid form-control" v-model="new_parameter_name" placeholder="Nom du nouveau paramètre..."/>
        </div>
        <div class="col-3">
            <input type="text" class="container-fluid form-control" v-model="new_parameter_value" placeholder="Valeur du nouveau paramètre..."/>
        </div>
        <div class="col-3">
            <button type="button" @click="add_new_parameter()" class="btn btn-outline-primary container-fluid">Ajouter</button>
        </div>
    </div>
    <br/><br/>
    <h3 style="padding-left: 30px;">Listing des paramètres</h3>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>#</th>
                <th>Section</th>
                <th>Nom</th>
                <th>Valeur</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tr v-for="parameter in parameter_list" :key="parameter.parameter_id">
            <td>#${ parameter.parameter_id }</td>
            <td>${ getParameterSectionName(parameter.parameter_section) }</td>
            <td>${ parameter.parameter_name }</td>
            <td>${ parameter.parameter_value }</td>
            <td><button type="button" class="btn btn-danger" @click="del_parameter(parameter.parameter_id)"><i class="fas fa-trash"></i></button></td>
        </tr>
    </table>
</div>
{% endblock %}

{% block scripts %}
    <script src="/js/parameters_interface.js"></script>
{% endblock %}