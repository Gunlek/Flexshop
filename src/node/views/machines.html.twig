{% extends 'libs/template.html.twig' %}

{% block links %}
    <a href="/workshops"><li>Ateliers</li></a>
    <a href="/categories"><li>Catégories</li></a>
    <a href="/machines"><li class="active">Machines</li></a>
    <a href="/sections"><li>Sections</li></a>
    <a href="/parameters"><li>Paramètres</li></a>
{% endblock %}

{% block content %}
<div id="workshops">
    <h1>Gestion des machines</h1>
    <h3 style="padding-left: 30px;">Ajout d'une machine</h3>
    <div class="row">
        <div class="col-2">
            <input type="text" class="container-fluid form-control" v-model="new_machine_title" placeholder="Nom de la nouvelle machine..."/>
        </div>
        <div class="col-2">
            <select v-model="new_machine_category" class="form-control container-fluid">
                <option disabled value="">Choisissez une catégorie</option>
                <option v-for="category in category_list" v-bind:value="category.category_id">${category.category_title}</option>
            </select>
        </div>
        <div class="col-2">
            <input type="text" class="container-fluid form-control" v-model="new_machine_brand" placeholder="Marque de la nouvelle machine..."/>
        </div>
        <div class="col-2">
            <input type="text" class="container-fluid form-control" v-model="new_machine_reference" placeholder="Référence de la nouvelle machine..."/>
        </div>
        <div class="col-2">
            <input type="text" class="container-fluid form-control" v-model="new_machine_image" placeholder="Image de la nouvelle machine..."/>
        </div>
        <div class="col-2">
            <button type="button" @click="add_new_machine()" class="btn btn-outline-primary container-fluid">Ajouter</button>
        </div>
    </div>
    <br/><br/>
    <h3 style="padding-left: 30px;">Listing des machines</h3>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>#</th>
                <th>Nom</th>
                <th>Catégorie</th>
                <th>Marque</th>
                <th>Référence</th>
                <th>Image</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tr v-for="machine in machine_list" :key="machine.machine_id">
            <td>#${ machine.machine_id }</td>
            <td>${ machine.machine_title }</td>
            <td>${ getMachineCategoryName(machine.machine_category) }</td>
            <td>${ machine.machine_brand }</td>
            <td>${ machine.machine_reference }</td>
            <td>${ machine.machine_image }</td>
            <td><button type="button" class="btn btn-danger" @click="del_machine(machine.machine_id)"><i class="fas fa-trash"></i></button></td>
        </tr>
    </table>
</div>
{% endblock %}

{% block scripts %}
    <script src="/js/machines_interface.js"></script>
{% endblock %}